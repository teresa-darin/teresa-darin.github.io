<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teresa & Darin Are Getting Married! üéâ</title>
    
    <!-- Consolidated Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Comic+Relief:wght@400;700&family=Coral+Pixels&family=Over+the+Rainbow&family=Playfair+Display:wght@700&family=Poppins:wght@400;600&family=Space+Mono&display=swap" rel="stylesheet">
    
    <!-- Preload critical asset -->
    <link rel="preload" href="./img/password-background.jpg" as="image">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --coral: #FF6B6B;
            --yellow: #FFE66D;
            --mint: #4ECDC4;
            --purple: #A855F7;
            --pink: #FF85A2;
            --blue: #60A5FA;
            --xp-blue: #0053EE;
        }

        body {
            font-family: "Comic Relief", serif;
            font-weight: 400;
            background-image: url('./img/windows-xp.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-repeat: no-repeat;
            min-height: 100vh;
            overflow-x: hidden;
            /* Start hidden to prevent FOUC, handled by JS with fallback */
            opacity: 0; 
            transition: opacity 0.5s ease-in;
        }

        body.loaded {
            opacity: 1;
        }

        .floating-shapes {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        .shape {
            position: absolute;
            border-radius: 50%;
            animation: float 20s infinite ease-in-out;
        }

        .shape:nth-child(1) {
            width: 300px;
            height: 300px;
            background: url('./img/darin-bubble.png') center/cover no-repeat;
            top: 10%;
            left: 5%;
            animation-delay: 0s;
        }

        .shape:nth-child(2) {
            width: 300px;
            height: 250px;
            background: url('./img/teresa-bubble.png') center/cover no-repeat;
            top: 20%;
            right: 10%;
            animation-delay: -5s;
        }

        .shape:nth-child(3) {
            width: 200px;
            height: 200px;
            background: url('./img/teresa-child.png') center/cover no-repeat;
            bottom: 30%;
            left: 8%;
            animation-delay: -10s;
        }

        .shape:nth-child(4) {
            width: 200px;
            height: 200px;
            background: url('./img/darin-child.png') center/cover no-repeat;
            top: 60%;
            right: 5%;
            animation-delay: -15s;
            border-radius: 63% 37% 54% 46% / 55% 48% 52% 45%;
        }

        @media (max-width: 768px) {
            .shape:nth-child(1), .shape:nth-child(2) { width: 80px; height: 80px; }
            .shape:nth-child(3), .shape:nth-child(4) { width: 60px; height: 60px; }
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            25% { transform: translateY(-30px) rotate(90deg); }
            50% { transform: translateY(0) rotate(180deg); }
            75% { transform: translateY(30px) rotate(270deg); }
        }

        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to bottom, #0997FF 0%, #0053EE 50%, #0050EE 51%, #06F 100%);
            padding: 0.4rem 2rem;
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            z-index: 100;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        nav a {
            text-decoration: none;
            color: white;
            font-family: 'Tahoma', sans-serif;
            font-size: 0.85rem;
            font-weight: bold;
            padding: 0.4rem 0.8rem;
            border-radius: 3px;
            transition: all 0.2s;
        }

        nav a:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        nav a:active {
            background: rgba(0, 0, 0, 0.2);
        }

        .xp-close-button {
            position: absolute;
            right: 0.4rem;
            top: 50%;
            transform: translateY(-50%);
            width: 21px;
            height: 21px;
            background: linear-gradient(to bottom, #FF6B6B 0%, #E63946 100%);
            border: 1px solid #8B0000;
            border-radius: 2px;
            color: white;
            font-family: 'Tahoma', sans-serif;
            font-size: 0.9rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            padding: 0;
            line-height: 1;
            box-shadow: inset 1px 1px 0 rgba(255, 255, 255, 0.3);
        }

        section {
            position: relative;
            z-index: 1;
            padding: 6rem 2rem;
            max-width: 900px;
            margin: 0 auto;
        }

        .hero {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding-top: 80px;
            position: relative;
        }

        .hero-box {
            position: absolute;
            left: 50%;
            top: 45%;
            transform: translate(-50%, -50%);
            width: clamp(280px, 48vw, 720px);
            pointer-events: none;
            z-index: 0;
            opacity: 0.95;
        }

        .hero h1, .hero .ampersand {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-family: "Comic Relief", serif;
            font-size: clamp(3rem, 10vw, 6rem);
            background: white;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: wiggle 3s infinite ease-in-out;
        }

        @keyframes wiggle {
            0%, 100% { transform: rotate(-2deg); }
            50% { transform: rotate(2deg); }
        }

        .hero .ampersand {
            font-size: clamp(2rem, 8vw, 4rem);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            width: clamp(80px, 20vw, 150px);
            height: clamp(80px, 20vw, 150px);
            background: var(--pink);
            border-radius: 50%;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .date-badge {
            background: var(--yellow);
            padding: 1rem 2rem;
            border-radius: 50px;
            font-family: 'Space Mono', monospace;
            font-size: 1.2rem;
            margin-top: 8rem;
            border: 3px solid #333;
            box-shadow: 5px 5px 0 #333;
            transform: rotate(3deg);
            position: relative;
            z-index: 3;
        }

        h2 {
            font-family: 'Tahoma', sans-serif;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1.5rem;
            position: relative;
            display: inline-block;
            background: linear-gradient(to bottom, #0997FF 0%, #0053EE 50%, #0050EE 51%, #06F 100%);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 3px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }

        .story-card {
            background: white;
            padding: 2rem;
            border-radius: 20px;
            border: 3px solid #333;
            box-shadow: 8px 8px 0 #0053EE;
            margin-top: 1rem;
            transform: rotate(-1deg);
            transition: transform 0.3s;
        }

        .story-card:hover {
            transform: rotate(1deg) scale(1.02);
        }

        .timeline { margin-top: 2rem; }

        .timeline-item {
            display: flex;
            gap: 1.5rem;
            margin-bottom: 2rem;
            align-items: flex-start;
        }

        .timeline-dot {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--yellow);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            flex-shrink: 0;
            border: 3px solid #333;
        }

        .timeline-dot img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            display: block;
        }

        .timeline-content {
            background: white;
            padding: 1.5rem;
            border-radius: 15px;
            border: 2px solid #333;
            flex: 1;
        }

        .timeline-content h3 {
            font-family: 'Comic Relief', monospace;
            color: #0053EE;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            margin-top: 2rem;
        }

        .detail-card {
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            transition: all 0.3s;
            position: relative;
            overflow: visible;
        }

        .details-grid .detail-card:nth-child(1)::before,
        .details-grid .detail-card:nth-child(2)::before {
            content: '';
            position: absolute;
            left: -18px;
            top: -18px;
            right: -18px;
            bottom: -18px;
            pointer-events: none;
            z-index: -1;
            background-repeat: no-repeat;
            background-position: center;
            background-size: contain;
            opacity: 0.95;
        }

        .example-outfits-grid {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-top: 16px;
            flex-wrap: wrap;
        }

        .outfit-card {
            flex: 1;
            display: flex;
            justify-content: center;
        }

        .outfit-card img {
            max-width: 100%;
            height: 400px;
            width: auto;
            object-fit: contain;
        }

        .detail-card:hover { transform: translateY(-5px); }
        .detail-card h3 { font-family: 'Space Mono', monospace; margin-bottom: 0.5rem; }

        .info-background {
            background: white;
            padding: 1rem;
            border-radius: 20px;
            border: 3px solid #333;
            box-shadow: 8px 8px 0 var(--xp-blue);
            margin-top: 2rem;
        }

        .rsvp-section {
            position: relative;
            padding: 2rem;
        }

        .rsvp-section::before {
            content: '';
            position: absolute;
            left: -60px;
            top: -30px;
            right: -50px;
            bottom: -100px;
            pointer-events: none;
            z-index: -1;
            opacity: 0.95;
        }

        .faq-item {
            background: white;
            margin-bottom: 1rem;
            border-radius: 15px;
            border: 2px solid #333;
            overflow: hidden;
        }

        .faq-question, .non-bolded-text {
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .faq-question { font-weight: 600; }
        .faq-question:hover { background: #f9f9f9; }

        .faq-answer {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: all 0.3s;
        }

        .faq-item.open .faq-answer {
            padding: 0 1.5rem 1.5rem;
            max-height: 200px;
        }

        .faq-item.open .faq-toggle { transform: rotate(45deg); }

        .faq-toggle {
            font-size: 1.5rem;
            color: var(--xp-blue);
            transition: transform 0.3s;
        }

        footer {
            text-align: center;
            padding: 3rem;
            font-family: 'Space Mono', monospace;
            position: relative;
            z-index: 1;
        }

        footer .hearts {
            font-size: 2rem;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .confetti {
            position: fixed;
            pointer-events: none;
            z-index: 1000;
        }

        .password-overlay {
            position: fixed;
            inset: 0;
            background: url('./img/password-background.jpg') center/cover no-repeat;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: opacity 0.5s, visibility 0.5s;
        }

        .password-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }

        .password-dialog {
            background: #ECE9D8;
            padding: 0;
            border-radius: 8px 8px 0 0;
            border: 3px solid;
            border-color: #0055E5 #004FCC #003FA3 #0055E5;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
            text-align: center;
            max-width: 420px;
            margin-top: 100px;
            width: 90%;
            animation: dialogBounce 0.5s ease-out;
            overflow: hidden;
        }

        .password-dialog-title {
            background: linear-gradient(to bottom, #0997FF 0%, #0053EE 50%, #0050EE 51%, #06F 100%);
            color: white;
            padding: 0.4rem 0.6rem;
            font-family: 'Tahoma', sans-serif;
            font-size: 0.85rem;
            font-weight: bold;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .password-dialog-content { padding: 1.5rem; background: #ECE9D8; }

        .password-dialog input {
            margin-bottom: 1.5rem;
            text-align: center;
            font-size: 1.1rem;
            background: white;
            border: 1px solid;
            border-color: #7F9DB9 #D4D0C8 #D4D0C8 #7F9DB9;
            border-radius: 0;
            box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.1);
            font-family: 'Tahoma', sans-serif;
            padding: 0.4rem 0.5rem;
            width: 100%;
        }

        .password-dialog input:focus {
            border-color: #608DB8 #C0C0C0 #C0C0C0 #608DB8;
            outline: none;
            box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.15);
        }

        .xp-button {
            width: auto !important;
            min-width: 75px;
            padding: 0.3rem 1.2rem;
            background: linear-gradient(to bottom, #FFFFFF 0%, #ECE9D8 100%) !important;
            border: 1px solid #003C74 !important;
            border-radius: 3px !important;
            color: #000 !important;
            font-family: 'Tahoma', sans-serif !important;
            font-weight: normal !important;
            font-size: 0.75rem !important;
            box-shadow: none !important;
            cursor: pointer;
            margin-top: 1rem;
        }

        .xp-button:hover {
            background: linear-gradient(to bottom, #FFFBF0 0%, #F0EDE0 100%) !important;
            border-color: #0055E5 !important;
        }

        .xp-button:active {
            background: linear-gradient(to bottom, #E0DED6 0%, #D4D0C8 100%) !important;
            box-shadow: inset 1px 1px 2px rgba(0, 0, 0, 0.2) !important;
        }

        .error-msg {
            color: var(--coral);
            font-weight: 600;
            min-height: 1.5em;
            margin-bottom: 0 !important;
            margin-top: 1rem;
        }

        .music-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            z-index: 101;
            cursor: pointer;
            background: white;
            border: 3px solid #333;
            box-shadow: 4px 4px 0 #333;
            transition: all 0.3s;
        }

        .music-toggle:hover { transform: scale(1.1); }

        .music-toggle.playing::before { content: 'üéµ'; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; font-size: 1.4rem; }
        .music-toggle.paused::before { content: 'üîá'; display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; font-size: 1.4rem; }

        .clippy {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 100px;
            height: auto;
            z-index: 101;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .clippy:hover { transform: scale(1.1); }

        .clippy-speech {
            position: fixed;
            bottom: 130px;
            left: 20px;
            background: #FFFFCC;
            border: 2px solid #000;
            border-radius: 8px;
            padding: 0.8rem 1rem;
            font-family: 'Tahoma', sans-serif;
            font-size: 0.85rem;
            max-width: 250px;
            z-index: 102;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
            box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.3);
        }

        .clippy-speech.show {
            opacity: 1;
            visibility: visible;
            animation: fadeIn 0.3s;
        }

        .clippy-speech::after {
            content: '';
            position: absolute;
            bottom: -12px;
            left: 30px;
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 12px solid #000;
        }

        .clippy-speech::before {
            content: '';
            position: absolute;
            bottom: -9px;
            left: 32px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 10px solid #FFFFCC;
            z-index: 1;
        }

        @media (max-width: 768px) {
            nav {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                justify-content: flex-start;
                gap: 1rem;
                padding: 1rem;
                scrollbar-width: none;
                -ms-overflow-style: none;
            }
            nav::-webkit-scrollbar { display: none; }
            nav a { white-space: nowrap; }

            .password-dialog { padding: 0.75rem; max-width: 320px; }
            .password-dialog h2 { font-size: 1.5rem; margin-bottom: 0.75rem; }
            .password-dialog p { font-size: 0.9rem; margin-bottom: 1rem; }
            .password-dialog input { font-size: 1rem; padding: 0.6rem 0.8rem; }
            .password-dialog button { padding: 0.8rem 1.5rem; font-size: 0.9rem; }
            
            .example-outfits-grid { flexDirection: column; gap: 15px; }
            .outfit-card { width: 100%; }
            .outfit-card img { height: 300px; max-width: 100%; }

            .details-grid .detail-card:nth-child(1)::before,
            .details-grid .detail-card:nth-child(2)::before {
                left: -8px; top: -8px; right: -8px; bottom: -8px; background-size: 120% auto; opacity: 0.9;
            }
        }

        /* Hide Clippy on mobile/touch */
        @media (max-width: 768px), (hover: none) and (pointer: coarse) {
            .clippy, .clippy-speech { display: none !important; }
        }

        @keyframes dialogBounce {
            0% { transform: scale(0.8) rotate(-5deg); opacity: 0; }
            50% { transform: scale(1.05) rotate(2deg); }
            100% { transform: scale(1) rotate(0); opacity: 1; }
        }
    </style>
</head>

<body>

    <div class="password-overlay" id="passwordOverlay">
        <div class="password-dialog">
            <div class="password-dialog-title">
                <span>you're invited! :-)</span>
            </div>
            <div class="password-dialog-content">
                <p>Please enter the password to see the details</p>
                <input type="password" id="passwordInput" placeholder="Enter password..." autofocus>
                <button id="passwordBtn" class="xp-button">Enter</button>
                <p class="error-msg" id="errorMsg"></p>
            </div>
        </div>
    </div>

    <audio id="bgMusic" loop>
        <source src="./music/right4you.mp3" type="audio/mpeg">
    </audio>

    <button class="music-toggle paused" id="musicToggle" aria-label="Toggle music"></button>

    <div class="clippy-speech" id="clippySpeech"></div>
    <img src="./img/ClippyArtwork.webp" alt="Clippy" class="clippy" id="clippyImg" />

    <div class="floating-shapes">
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
        <div class="shape"></div>
    </div>

    <nav>
        <a href="#details">Details</a>
        <a href="#story">Expectations</a>
        <a href="#rsvp">RSVP</a>
        <a href="#registry">Registry</a>
        <a href="#faq">FAQ</a>
        <a href="#home" class="xp-close-button" onclick="createConfetti()" aria-label="Close">‚úï</a>
    </nav>

    <section class="hero" id="home">
        <img src="./assets/misc-30.svg" class="hero-box" alt="" aria-hidden="true" />
        <h1>Teresa</h1>
        <span class="ampersand">&</span>
        <h1>Darin</h1>
        <div class="date-wrap">
            <div class="date-badge">August 8, 2026 ‚Ä¢ 6:00 PM ‚Ä¢ Saturday</div>
        </div>
    </section>

    <section id="details">
        <h2>the details</h2>
        <div class="details-grid">
            <div class="detail-card info-background">
                <h3>Reception</h3>
                <p><b>Tasty Szechuan Restaurant</b><br><br>
                    <a href="https://maps.app.goo.gl/WZERmSh6vmo5beAs7" target="_blank">707
                        148th Ave NE, Bellevue, WA 98007</a><br><br>6:00 PM - 9:00pm
                </p>
                <br>
                <br>
                Please arrive no later than 6:15 for seating.
            </div>
        </div>
        <div class="details-grid">
            <div class="detail-card info-background">
                <h3>Dress Code</h3>
                <p><b>Cocktail attire - Mini/midi/maxi length formal wear (in that order of preference), lightweight suits, tie optional, dress shoes/loafers</b><br><br>
                    i'm going to wear a short white dress if that helps you xD - honestly you can wear what you have that's nice and formal enough <br>
                    <br> No specific colors-just plz dont wear a white dress or suit üíÄ<br>

                    ask us if you have questions about what to wear

                    <br> <br>
                    Below are <b>examples only!</b>
                </p>
            </div>
        </div>

        <div class="example-outfits-grid">
            <div class="outfit-card">
                <img src="./img/dresscode2.png" alt="Dress code example 1">
            </div>
            <div class="outfit-card">
                <img src="./img/dresscode1.png" alt="Dress code example 2">
            </div>
        </div>
    </section>

    <section id="story">
        <h2>What can you expect? </h2>
        <div class="story-card">
            <p>This is going to be a <b>non-normie</b> reception with some <b> normie activities.</b>
                By that, it's probably not similar to the traditional weddings you've been to before.

                Please read ahead to understand what to expect
            </p>
        </div>
        <div class="timeline">
            <div class="timeline-item">
                <div class="timeline-dot">
                    <img src="./assets/glasses.svg" alt="Ceremony">
                </div>
                <div class="timeline-content">
                    <h3>you aren't going to see us get married</h3><br>
                    <p> Like we've mentioned, we actually will be getting legally married and having a ceremony with
                        immediate family the day before. So you aren't gonna see us say our vows or kiss haha</p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot">
                    <img src="./assets/freckle.svg" alt="Love">
                </div>
                <div class="timeline-content">
                    <h3>we like you a lot!</h3><br>
                    <p>This is an intimate reception with an intentional guest list. We want to celebrate our marriage
                        with you but we're also introverted.
                        That's why you can expect &lt;50 people at the reception! It's gonna be small, chill, memorable,
                        and fun.
                        Plus the only adults here are our parents xD
                    </p>
                </div>
            </div>
            <div class="timeline-item">
                <div class="timeline-dot">
                    <img src="./assets/surprise.svg" alt="Cake">
                </div>
                <div class="timeline-content">
                    <h3>some surprises</h3><br>
                    <p>Besides eating, drinking, and yapping, we'll also have speeches and cake cutting. So excited for
                        the cake omg!! We also have a few fun surprises planned throughout the night. idk I thought I
                        heard something about a raffle and games....</p>
                </div>
            </div>
        </div>
    </section>

    <section id="rsvp">
        <h2>RSVP</h2>
        <div class="rsvp-section">
            <div class="info-background">
                <div class="non-bolded-text">
                    <span>please RSVP by <b>May 1 2026</b></span>
                </div>
            </div>
            <div class="rsvp-button-container" style="text-align: center; margin-top: 2rem;">
                <button type="button" id="rsvpBtn" class="xp-button rsvp-button">RSVP!</button>
            </div>
        </div>
    </section>

    <section id="registry">
        <h2>Registry </h2>
        <div class="info-background">
            <div class="non-bolded-text">
                <span>Your presence is the greatest gift of all! If you wish to honor the occasion with a gift, a
                    monetary contribution would be sincerely appreciated. </span>
            </div>
        </div>

    </section>

    <section id="faq">
        <h2>FAQ</h2>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" style="width: 100%; border: none; background: none; text-align: left; font-family: inherit; font-size: inherit;">
                <span>Can I bring a plus one?</span>
                <span class="faq-toggle">+</span>
            </button>
            <div class="faq-answer">
                <p>Please check your RSVP form. If you're unsure/have questions, you can ask us</p>
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" style="width: 100%; border: none; background: none; text-align: left; font-family: inherit; font-size: inherit;">
                <span>Is there parking available?</span>
                <span class="faq-toggle">+</span>
            </button>
            <div class="faq-answer">
                <p>Yes! Free parking is available at the restaurant.</p>
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" style="width: 100%; border: none; background: none; text-align: left; font-family: inherit; font-size: inherit;">
                <span>What if I have dietary restrictions?</span>
                <span class="faq-toggle">+</span>
            </button>
            <div class="faq-answer">
                <p>We ask you that in the RSVP form. Ofc we will accommodate any dietary restrictions you have! Please
                    note this is family style dining.</p>
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" style="width: 100%; border: none; background: none; text-align: left; font-family: inherit; font-size: inherit;">
                <span>What kind of food?</span>
                <span class="faq-toggle">+</span>
            </button>
            <div class="faq-answer">
                <p>Chinese food. COME HUNGRY!!!</p>
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" style="width: 100%; border: none; background: none; text-align: left; font-family: inherit; font-size: inherit;">
                <span>Are children allowed?</span>
                <span class="faq-toggle">+</span>
            </button>
            <div class="faq-answer">
                <p>Unfortunately there are no children allowed </p>
            </div>
        </div>
        <div class="faq-item">
            <button class="faq-question" aria-expanded="false" style="width: 100%; border: none; background: none; text-align: left; font-family: inherit; font-size: inherit;">
                <span>Will there be drinks served?</span>
                <span class="faq-toggle">+</span>
            </button>
            <div class="faq-answer">
                <p>There will be both non alcoholic and alcoholic drinks provided :)</p>
            </div>
        </div>
    </section>

    <footer>
        <div class="hearts">üíñüíñüíñ</div>
        <p>Can't wait to celebrate with you!</p>
        <p>‚ù§Ô∏è engineer: Teresa (check out the <a href="https://github.com/teresa-darin/teresa-darin.github.io"
                target="_blank">repo</a>)</p>
        <p>üíÄ engineer manager: Darin</p>
    </footer>

    <script>
        // Load background image with safety timeout
        // This ensures the site isn't blank forever if the image breaks
        const loadPage = () => document.body.classList.add('loaded');
        
        const img = new Image();
        img.onload = loadPage;
        img.onerror = loadPage; // Show page even if image fails
        img.src = './img/password-background.jpg';
        
        // Fallback: If image takes longer than 3 seconds, show content anyway
        setTimeout(loadPage, 3000);

        let isGroupA = false;

        // Password protection
        const SECRET_PASSWORD = 'shibar';
        const SECOND_SECRET_PASSWORD = 'nihowdy';

        // Music toggle
        const bgMusic = document.getElementById('bgMusic');
        const musicToggle = document.getElementById('musicToggle');
        let musicPlaying = false;

        // Add music toggle functionality
        musicToggle.addEventListener('click', () => {
            if (musicPlaying) {
                bgMusic.pause();
                musicToggle.classList.remove('playing');
                musicToggle.classList.add('paused');
                musicPlaying = false;
            } else {
                bgMusic.play().catch(e => console.log("Playback prevented:", e));
                musicToggle.classList.add('playing');
                musicToggle.classList.remove('paused');
                musicPlaying = true;
            }
        });

        function checkPassword() {
            const input = document.getElementById('passwordInput');
            const error = document.getElementById('errorMsg');
            const dialog = document.querySelector('.password-dialog');

            if (input.value === SECRET_PASSWORD) {
                isGroupA = true;
                unlockSite();
            } else if (input.value === SECOND_SECRET_PASSWORD) {
                isGroupA = false;
                unlockSite();
            } else {
                error.textContent = 'WRONG! try again';
                input.value = '';
                input.focus();
                
                // Reset animation to trigger it again
                dialog.style.animation = 'none';
                dialog.offsetHeight; // Trigger reflow
                dialog.style.animation = 'dialogBounce 0.5s ease-out'; // You might want to change this to a "shake" animation in CSS
            }
        }

        function unlockSite() {
            window.scrollTo(0, 0);
            document.getElementById('passwordOverlay').classList.add('hidden');
            
            // Try to play music (requires user interaction which happened via click/enter)
            bgMusic.play().then(() => {
                musicPlaying = true;
                musicToggle.classList.add('playing');
                musicToggle.classList.remove('paused');
            }).catch(e => {
                console.log("Auto-play blocked, user must click play manually");
            });

            createConfetti();
        }

        document.getElementById('passwordInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') checkPassword();
        });

        document.getElementById('passwordBtn').addEventListener('click', checkPassword);

        // RSVP Button Logic
        document.getElementById('rsvpBtn').addEventListener('click', () => {
            const linkX = 'https://forms.gle/zkx3rsr3VmWXk7xr6'; // no plus one
            const linkY = 'https://forms.gle/tLZr7PXWdsrgb5f79'; // party of 2
            const target = isGroupA ? linkX : linkY;
            window.open(target, '_blank', 'noopener');
        });

        // FAQ Accordion
        document.querySelectorAll('.faq-question').forEach(q => {
            q.addEventListener('click', () => {
                const parent = q.parentElement;
                const isOpen = parent.classList.contains('open');
                
                // Toggle current
                parent.classList.toggle('open');
                q.setAttribute('aria-expanded', !isOpen);
            });
        });

        // Confetti effect
        function createConfetti() {
            const colors = ['#FF6B6B', '#FFE66D', '#4ECDC4', '#A855F7', '#FF85A2', '#60A5FA'];
            const duration = 2000;
            const particleCount = 250;

            for (let i = 0; i < particleCount; i++) {
                setTimeout(() => {
                    const confetti = document.createElement('div');
                    confetti.className = 'confetti';
                    const size = Math.random() * 12 + 6;
                    confetti.style.cssText = `
                        left: ${Math.random() * 100}vw;
                        top: -20px;
                        width: ${size}px;
                        height: ${size}px;
                        background: ${colors[Math.floor(Math.random() * colors.length)]};
                        border-radius: ${Math.random() > 0.5 ? '50%' : '0'};
                        transform: rotate(${Math.random() * 360}deg);
                    `;
                    document.body.appendChild(confetti);

                    const drift = (Math.random() - 0.5) * 200;
                    const animation = confetti.animate([
                        { transform: `translateY(0) translateX(0) rotate(0deg)`, opacity: 1 },
                        { transform: `translateY(100vh) translateX(${drift}px) rotate(${Math.random() * 1080}deg)`, opacity: 0.7 }
                    ], {
                        duration: Math.random() * 2000 + 2500,
                        easing: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)'
                    });

                    animation.onfinish = () => confetti.remove();
                }, Math.random() * duration);
            }
        }

        // Clippy functionality
        const phrases = [
            "I wonder where their first date was!",
            "It looks like you're writing a letter. Would you like help?",
            "Welcome to our wedding website!",
            "6 7",
            "Congratulations on finding Clippy!",
            "Hi! I'm Clippy, your office assistant!",
            "Darin and Teresa met in class. The class was programming languages!",
            "I see you're working hard. Need any assistance?",
            "Would you like some tips on using this application?",
            "Teresa's MBTI is INFJ!",
            "I'm here to help make your day easier!",
            "Click me again for another helpful tip!",
            "Remember to save your work frequently!",
            "Darin's MBTI is ISTP!",
            "Great things are coming for you!!",
            "My best friends are Towelie and Randy Marsh!",
            "I wonder where Darin proposed!",
            "This song is Right 4 You by Future + Metro Boomin!",
            "Clippy loves to assist with tasks big and small!",
        ];

        let currentIndex = 0;
        let hideTimeout;
        const speechBubble = document.getElementById('clippySpeech');
        const clippyImg = document.getElementById('clippyImg');

        function firstClippyMsg() {
            if (!clippyImg) return;
            setTimeout(function () {
                speechBubble.classList.add('show');
                speechBubble.textContent = "click me!";

                hideTimeout = setTimeout(function () {
                    speechBubble.classList.remove('show');
                }, 30000);
            }, 10000);
        }

        if (clippyImg) {
            clippyImg.addEventListener('click', function () {
                clearTimeout(hideTimeout);

                speechBubble.classList.add('show');
                speechBubble.textContent = phrases[currentIndex];
                currentIndex = Math.floor(Math.random() * phrases.length);

                hideTimeout = setTimeout(function () {
                    speechBubble.classList.remove('show');
                }, 10000);
            });
        }

        // Initial calls
        createConfetti();
        firstClippyMsg();

        // Smooth scrolling
        document.querySelectorAll('nav a').forEach(a => {
            a.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            });
        });
    </script>
</body>
</html>
